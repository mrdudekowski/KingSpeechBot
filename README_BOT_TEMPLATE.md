# Simple Smart Tutor Bot — Архитектурный шаблон и промпт для воссоздания

## Описание

Этот шаблон описывает структуру, архитектуру и ключевые компоненты Telegram-бота для образовательного центра с интеграцией Google Sheets, поддержкой многоязычия и AI-тьютором (через OpenRouter, HuggingFace, DeepSeek и др.).

---

## 1. Архитектура проекта

- **Модули-обработчики шагов**: каждый шаг опроса вынесен в отдельный модуль (`steps/`).
- **Сервисы**: работа с Google Sheets (`services/sheets_service.py`), локализация (`services/localization_service.py`), AI-тьютор (`services/ai_tutor_service.py`).
- **Локализация**: все тексты и варианты выбора вынесены в json-файлы (`locales/ru.json`, `locales/en.json`).
- **Конфиги**: параметры AI-тьютора и лимиты — в `tutor_config.json`.
- **Тесты**: сценарии пользователя, администратора, соединения с Google Sheets.

---

## 2. Ключевые функции

- Опрос с прогресс-баром, поддержкой многоязычия, множественным выбором ожиданий.
- Валидация номера телефона через кнопку.
- Автоматическое создание листа по месяцу в Google Sheets, столбец "Статус".
- Уведомления менеджеру о новых заявках с inline-кнопками для смены статуса.
- AI-тьютор запускается только после завершения опроса, по кнопке.
- Все данные в Google Sheets сохраняются на русском языке, независимо от языка интерфейса пользователя.

---

## 3. Пример промпта для воссоздания такого бота

```
Создай Telegram-бота для образовательного центра с такими требованиями:

1. Опрос пользователя (имя, язык, уровень, цель, формат, ожидания, дата начала, телефон) с поддержкой русского и английского языков интерфейса.
2. Все тексты, варианты выбора и сообщения должны быть вынесены в отдельные json-файлы локализации.
3. Каждый шаг опроса реализуй отдельным модулем (steps/step_name.py), используй сервисы для работы с Google Sheets и AI.
4. Интегрируй Google Sheets: заявки сохраняются в отдельный лист по месяцу, все значения (цели, уровень, формат, ожидания, дата) всегда на русском языке, даже если пользователь проходил опрос на английском.
5. После завершения опроса показывай кнопку "Попробовать Simple Tutor". Только после нажатия пользователь может общаться с AI-тьютором.
6. AI-тьютор работает через OpenRouter (или HuggingFace/DeepSeek), использует системный промпт из tutor_config.json, лимитирует количество вопросов, всегда даёт насыщенные, полезные, мотивирующие ответы, не отвечает на неуместные вопросы.
7. Весь код должен быть модульным, легко расширяемым, с поддержкой автотестов и документации.
```

---

## 4. Инструкция по изготовлению такого бота

1. **Создай структуру проекта:**
   - Каталоги: `steps/`, `services/`, `locales/`
   - Файлы: `main.py`, `config.py`, `.env`, `tutor_config.json`, `requirements.txt`

2. **Реализуй сервисы:**
   - `services/sheets_service.py` — работа с Google Sheets (через сервисный аккаунт, автоматическое создание листов по месяцу, сохранение на русском)
   - `services/localization_service.py` — загрузка и выдача текстов из json-файлов
   - `services/ai_tutor_service.py` — интеграция с OpenRouter/HuggingFace/DeepSeek (OpenAI-совместимый API)

3. **Создай шаги опроса:**
   - Каждый шаг (имя, язык, уровень, цель, формат, ожидания, дата, телефон, финал) — отдельный модуль в `steps/`
   - Все варианты выбора (goals, level, format, expectations, start_date) — с поддержкой ru/en, с маппингом en→ru для сохранения

4. **Локализация:**
   - Все тексты и варианты выбора — в `locales/ru.json` и `locales/en.json`

5. **AI-тьютор:**
   - Системный промпт и лимиты — в `tutor_config.json`
   - Вызов AI только после завершения опроса, лимит вопросов, фильтрация неуместных запросов

6. **Тесты:**
   - Покрой автотестами пользовательские сценарии, админ-функции, соединение с Google Sheets

7. **Документация:**
   - Оформи README с описанием архитектуры, шагов, переменных окружения и примерами запуска

---

## 5. Быстрый старт (шаблон)

- Склонируй репозиторий или создай структуру вручную
- Установи зависимости: `pip install -r requirements.txt`
- Заполни `.env` (токены Telegram, OpenRouter/HuggingFace, Google Sheets)
- Заполни `tutor_config.json` (промпт, лимиты)
- Запусти бота: `python main.py`

---

**Этот файл можно использовать как промпт для генерации такого бота в будущем или как подробную инструкцию для команды!** 